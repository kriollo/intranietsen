{% extends 'portal/portal' %}
{% block appStylos %}
  <link rel="stylesheet" href="views/app/template/datatables/dataTables.bootstrap.css">
{% endblock %}

{% block appBody %}
<section class="content-header">
    <h1>
        RRHH
        <small>Turnos Plataforma</small>
    </h1>
    <ol class="breadcrumb">
    <li><a href="#"><i class="fa fa-home"></i> Home</a></li>
    <li class="active">Turnos Plataforma</li>
    </ol>
</section>
<section class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-body">
                <form name="formbuscaturno" id="formbuscaturno"  method="post">
                    <div class="input-daterange"> 
                        <label>Fecha: </label>
                        <label>&nbsp;</label>
                        <input type="date" name="fechaturno" id="fechaturno" value='{{ "now"|date("Y-m-d") }}'>
                        <label>&nbsp;</label>
                        <button type="button" name="btnbuscar" id="btnbuscar" onclick="revisar_turno_por_fecha()" class="btn btn-primary">Aplicar Filtrar</button>
                        <button type="button" onclick="location.reload();" class="btn btn-primary">Quitar Filtro</button>
                        <a class="btn btn-success btn-social" id="btn_exporta_excel_turno_plataforma" title="Exportar a Excel" data-toggle="tooltip">
                            <i class="fa fa-arrow-down"></i> Exportar Excel
                        </a>
                    </div>
                    <hr>
                </form>
                
                <table id="dataTables3" class="table table-bordered" >
                    <thead>
                        <tr>
                            <th>N°</th>
                            <th>Rut</th>
                            <th>Servicio</th>
                            
                            <th>H.Ingreso</th>
                            <th>H.Salida</th>

                            <th>Q.H.Turno</th>
                            <th>H.Colacion</th>
                            <th>H.Colacion</th>
                            <th>Break 1</th>
                            <th>Break 2</th>
                            <th>Asistencia</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody id="turnos">
                      {% set No = 1 %}
                      {% for t in cargar_turnos if false != cargar_turnos %}
                        <tr>
                            <td>{{ No }}</td>
                            <td>{{ t.nombres|raw|title }}</td>
                            <td>{{ t.servicio }}</td>
                            
                            <td>{{ t.hora_ingreso  }}</td>
                            <td>{{ t.hora_salida }}</td>

                            <td>{{ t.hora_turnos }}</td>
                            <td>{{ t.hora_colacion }}</td>
                            <td>{{ t.horario_colacion }}</td>
                            <td>{{ t.break_1  }}</td>
                            <td>{{ t.break_2 }}</td>
                            <td>{{ t.asistencia }}</td>
                            <td class='center' width='60'> <a data-toggle='tooltip' data-placement='top' title='Modificar' class='btn btn-warning btn-sm' onclick="modificarnuevodatos({{ d.id_tblausencias }})">
                                <i class='glyphicon glyphicon-edit'></i></a>
                            </td>
                        </tr>

                        {% set No =  No + 1 %}
                      {% endfor %}
                    </tbody>
                </table>
                </div>      
            </div>
        </div>
    </div>
</section>
    {% endblock %}
    {% block appScript %}
        <script src="views/app/template/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
        <script src="views/app/template/datatables/dataTables.bootstrap.min.js" type="text/javascript"></script>

        <script src="views/app/js/rrhh/turnos.js"></script>
        <script>
            $("#dataTables3").dataTable({
                 "language": {
                     "search": "Buscar:",
                     "zeroRecords": "No hay datos para mostrar",
                     "info":"Mostrando _END_ usuarios, de un total de _TOTAL_ ",
                     "loadingRecords": "Cargando...",
                     "processing":"Procesando...",
                     "infoEmpty":"No hay entradas para mostrar",
                     "lengthMenu": "Mostrar _MENU_ Filas",
                     "paginate":{
                     "first":"Primera",
                     "last":"Ultima",
                     "next":"Siguiente",
                     "previous":"Anterior",
                     }
                               },
                 "autoWidth": true,
                 "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "Todos"]],
                 "iDisplayLength": 25,
                  "scrollX": true
             });
        </script>
    {% endblock %}
